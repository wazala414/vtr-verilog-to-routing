<!--

    Same side benchmarking

    Basic FPGA architecture with only CLBs and IOs

    Unidirectional switchblock with fully connected track and same side connection.
    The architecture has been adapted to work with a fully connected switchblock.

-->


<architecture>

    <models>

    </models>

    <!--
            Tile: IO, CLB -> each pin connected to single track
    -->

    <tiles>
        <tile name="io">
            <sub_tile name="io" capacity="2">
                <equivalent_sites>
                    <site pb_type="io" pin_mapping="direct"/>
                </equivalent_sites>
                <input name="outpad" num_pins="1"/>
                <output name="inpad" num_pins="1"/>
                <clock name="clock" num_pins="1"/>
                <fc in_type="frac" in_val="0.2" out_type="frac" out_val="0.2"/>
                <pinlocations pattern="custom">
                    <loc side="left">io.outpad io.inpad io.clock</loc>
                    <loc side="top">io.outpad io.inpad io.clock</loc>
                    <loc side="right">io.outpad io.inpad io.clock</loc>
                    <loc side="bottom">io.outpad io.inpad io.clock</loc>
                </pinlocations>
            </sub_tile>
        </tile>

        <tile name="clb">
            <sub_tile name="clb">
                <equivalent_sites>
                    <site pb_type="clb" pin_mapping="direct"/>
                </equivalent_sites>
                <input name="I0" num_pins="4" equivalent="full"/>
                <input name="I1" num_pins="4" equivalent="full"/>
                <input name="I2" num_pins="4" equivalent="full"/>
                <input name="I3" num_pins="4" equivalent="full"/>
                <input name="I4" num_pins="4" equivalent="full"/>
                <input name="I5" num_pins="4" equivalent="full"/>
                <input name="I6" num_pins="4" equivalent="full"/>
                <input name="I7" num_pins="4" equivalent="full"/>
                <output name="O" num_pins="8" equivalent="none"/>
                <clock name="clk" num_pins="1"/>
                <fc in_type="frac" in_val="0.2" out_type="frac" out_val="0.2"/>
                <pinlocations pattern="spread"/>
            </sub_tile>
        </tile>      
    </tiles>

    <!-- 
            Auto Layout: IO, CLB, Multiplier, RAM
    -->

    <layout>
        <auto_layout aspect_ratio="1.0">
            <perimeter type="io" priority="100"/>
            <corners type="EMPTY" priority="101"/>
            <fill type="clb" priority="10"/>
        </auto_layout>
    </layout>

    <!-- 
            Device: Even channel distribution, custom SB, same input switch mux as for wires 
    -->

    <device>
        <sizing R_minW_nmos="13090.000000" R_minW_pmos="19086.831111"/>
        <area grid_logic_tile_area="0"/>
        <chan_width_distr>
          <x distr="uniform" peak="1"/>
          <y distr="uniform" peak="1"/>
        </chan_width_distr>
        <switch_block type="custom"/>
        <connection_block input_switch_name="mux_switch"/>
    </device>

    <!-- 
            Switch List: Single Mux
    -->

    <switchlist>
        <switch type="mux" name="mux_switch" R="448" Cin="1.8e-15" Cout="0.000000e+00" mux_trans_size="1.5" buf_size="20.0000000"/>
    </switchlist>

    <!-- 
            Segment List: Single fully connected segment type of length 1 using a Mux and present uniformely accross the channel
    -->

    <segmentlist>
        <segment freq="1.00" name="wire" length="1" type="unidir" Rmetal="" Cmetal="">
            <mux name="mux_switch"/>
            <sb type="pattern">1 1</sb>
            <cb type="pattern">1</cb>
        </segment>
    </segmentlist>

    <!-- 
            Switchblock List: All switchblocks are unidirectional fully connected switchblocks 
    -->
    
    <switchblocklist>
        <switchblock name="full_switchblock" type="unidir">
            <switchblock_location type="EVERYWHERE"/>
            <switchfuncs>
<func type="ll" formula="t+9"/>
<func type="ll" formula="t+8"/>
<func type="ll" formula="t+7"/>
<func type="ll" formula="t+6"/>
<func type="ll" formula="t+5"/>
<func type="ll" formula="t+4"/>
<func type="ll" formula="t+3"/>
<func type="ll" formula="t+2"/>
<func type="ll" formula="t+1"/>
<func type="ll" formula="t+0"/>
<func type="rr" formula="t+9"/>
<func type="rr" formula="t+8"/>
<func type="rr" formula="t+7"/>
<func type="rr" formula="t+6"/>
<func type="rr" formula="t+5"/>
<func type="rr" formula="t+4"/>
<func type="rr" formula="t+3"/>
<func type="rr" formula="t+2"/>
<func type="rr" formula="t+1"/>
<func type="rr" formula="t+0"/>
<func type="tt" formula="t+9"/>
<func type="tt" formula="t+8"/>
<func type="tt" formula="t+7"/>
<func type="tt" formula="t+6"/>
<func type="tt" formula="t+5"/>
<func type="tt" formula="t+4"/>
<func type="tt" formula="t+3"/>
<func type="tt" formula="t+2"/>
<func type="tt" formula="t+1"/>
<func type="tt" formula="t+0"/>
<func type="bb" formula="t+9"/>
<func type="bb" formula="t+8"/>
<func type="bb" formula="t+7"/>
<func type="bb" formula="t+6"/>
<func type="bb" formula="t+5"/>
<func type="bb" formula="t+4"/>
<func type="bb" formula="t+3"/>
<func type="bb" formula="t+2"/>
<func type="bb" formula="t+1"/>
<func type="bb" formula="t+0"/>
<func type="bt" formula="t+9"/>
<func type="bt" formula="t+8"/>
<func type="bt" formula="t+7"/>
<func type="bt" formula="t+6"/>
<func type="bt" formula="t+5"/>
<func type="bt" formula="t+4"/>
<func type="bt" formula="t+3"/>
<func type="bt" formula="t+2"/>
<func type="bt" formula="t+1"/>
<func type="bt" formula="t+0"/>
<func type="bl" formula="t+9"/>
<func type="bl" formula="t+8"/>
<func type="bl" formula="t+7"/>
<func type="bl" formula="t+6"/>
<func type="bl" formula="t+5"/>
<func type="bl" formula="t+4"/>
<func type="bl" formula="t+3"/>
<func type="bl" formula="t+2"/>
<func type="bl" formula="t+1"/>
<func type="bl" formula="t+0"/>
<func type="br" formula="t+9"/>
<func type="br" formula="t+8"/>
<func type="br" formula="t+7"/>
<func type="br" formula="t+6"/>
<func type="br" formula="t+5"/>
<func type="br" formula="t+4"/>
<func type="br" formula="t+3"/>
<func type="br" formula="t+2"/>
<func type="br" formula="t+1"/>
<func type="br" formula="t+0"/>
<func type="rt" formula="t+9"/>
<func type="rt" formula="t+8"/>
<func type="rt" formula="t+7"/>
<func type="rt" formula="t+6"/>
<func type="rt" formula="t+5"/>
<func type="rt" formula="t+4"/>
<func type="rt" formula="t+3"/>
<func type="rt" formula="t+2"/>
<func type="rt" formula="t+1"/>
<func type="rt" formula="t+0"/>
<func type="rl" formula="t+9"/>
<func type="rl" formula="t+8"/>
<func type="rl" formula="t+7"/>
<func type="rl" formula="t+6"/>
<func type="rl" formula="t+5"/>
<func type="rl" formula="t+4"/>
<func type="rl" formula="t+3"/>
<func type="rl" formula="t+2"/>
<func type="rl" formula="t+1"/>
<func type="rl" formula="t+0"/>
<func type="rb" formula="t+9"/>
<func type="rb" formula="t+8"/>
<func type="rb" formula="t+7"/>
<func type="rb" formula="t+6"/>
<func type="rb" formula="t+5"/>
<func type="rb" formula="t+4"/>
<func type="rb" formula="t+3"/>
<func type="rb" formula="t+2"/>
<func type="rb" formula="t+1"/>
<func type="rb" formula="t+0"/>
<func type="tb" formula="t+9"/>
<func type="tb" formula="t+8"/>
<func type="tb" formula="t+7"/>
<func type="tb" formula="t+6"/>
<func type="tb" formula="t+5"/>
<func type="tb" formula="t+4"/>
<func type="tb" formula="t+3"/>
<func type="tb" formula="t+2"/>
<func type="tb" formula="t+1"/>
<func type="tb" formula="t+0"/>
<func type="tl" formula="t+9"/>
<func type="tl" formula="t+8"/>
<func type="tl" formula="t+7"/>
<func type="tl" formula="t+6"/>
<func type="tl" formula="t+5"/>
<func type="tl" formula="t+4"/>
<func type="tl" formula="t+3"/>
<func type="tl" formula="t+2"/>
<func type="tl" formula="t+1"/>
<func type="tl" formula="t+0"/>
<func type="tr" formula="t+9"/>
<func type="tr" formula="t+8"/>
<func type="tr" formula="t+7"/>
<func type="tr" formula="t+6"/>
<func type="tr" formula="t+5"/>
<func type="tr" formula="t+4"/>
<func type="tr" formula="t+3"/>
<func type="tr" formula="t+2"/>
<func type="tr" formula="t+1"/>
<func type="tr" formula="t+0"/>
<func type="lb" formula="t+9"/>
<func type="lb" formula="t+8"/>
<func type="lb" formula="t+7"/>
<func type="lb" formula="t+6"/>
<func type="lb" formula="t+5"/>
<func type="lb" formula="t+4"/>
<func type="lb" formula="t+3"/>
<func type="lb" formula="t+2"/>
<func type="lb" formula="t+1"/>
<func type="lb" formula="t+0"/>
<func type="lr" formula="t+9"/>
<func type="lr" formula="t+8"/>
<func type="lr" formula="t+7"/>
<func type="lr" formula="t+6"/>
<func type="lr" formula="t+5"/>
<func type="lr" formula="t+4"/>
<func type="lr" formula="t+3"/>
<func type="lr" formula="t+2"/>
<func type="lr" formula="t+1"/>
<func type="lr" formula="t+0"/>
<func type="lt" formula="t+9"/>
<func type="lt" formula="t+8"/>
<func type="lt" formula="t+7"/>
<func type="lt" formula="t+6"/>
<func type="lt" formula="t+5"/>
<func type="lt" formula="t+4"/>
<func type="lt" formula="t+3"/>
<func type="lt" formula="t+2"/>
<func type="lt" formula="t+1"/>
<func type="lt" formula="t+0"/>
            </switchfuncs>
            <wireconn from_type="wire" to_type="wire" from_switchpoint="0" to_switchpoint="0" num_conns="from"/>
        </switchblock>
    </switchblocklist>

    <!-- 
            Complex Blocks List: 
    -->

    <complexblocklist>
        <pb_type name="io">
            <input name="outpad" num_pins="1"/>
            <output name="inpad" num_pins="1"/>
            <clock name="clock" num_pins="1"/>
            <mode name="inpad">
                <pb_type name="inpad" blif_model=".input" num_pb="1">
                    <output name="inpad" num_pins="1"/>
                </pb_type>
                <interconnect>
                    <direct name="inpad" input="inpad.inpad" output="io.inpad"/>
                </interconnect>
            </mode>
            <mode name="outpad">
                <pb_type name="outpad" blif_model=".output" num_pb="1">
                    <input name="outpad" num_pins="1"/>
                </pb_type>
                <interconnect>
                    <direct name="outpad" input="io.outpad" output="outpad.outpad"/>
                </interconnect>
            </mode>
        </pb_type>

        <pb_type name="clb">
            <input name="I0" num_pins="4" equivalent="full"/>
            <input name="I1" num_pins="4" equivalent="full"/>
            <input name="I2" num_pins="4" equivalent="full"/>
            <input name="I3" num_pins="4" equivalent="full"/>
            <input name="I4" num_pins="4" equivalent="full"/>
            <input name="I5" num_pins="4" equivalent="full"/>
            <input name="I6" num_pins="4" equivalent="full"/>
            <input name="I7" num_pins="4" equivalent="full"/>
            <output name="O" num_pins="8" equivalent="none"/>
            <clock name="clk" num_pins="1"/>
            <pb_type name="ble4" num_pb="8">
                <input name="in" num_pins="4"/>
                <output name="out" num_pins="1"/>
                <clock name="clk" num_pins="1"/>
                <pb_type name="lut4" blif_model=".names" num_pb="1" class="lut">
                    <input name="in" num_pins="4" port_class="lut_in"/>
                    <output name="out" num_pins="1" port_class="lut_out"/>
                </pb_type>
                <pb_type name="ff" blif_model=".latch" num_pb="1" class="flipflop">
                    <input name="D" num_pins="1" port_class="D"/>
                    <output name="Q" num_pins="1" port_class="Q"/>
                    <clock name="clk" num_pins="1" port_class="clock"/>
                    <T_setup value="1.891e-11" port="ff.D" clock="clk"/>
                    <T_clock_to_Q max="6.032e-11" port="ff.Q" clock="clk"/>
                </pb_type>
                <interconnect>
                    <direct name="direct1" input="ble4.in" output="lut4[0:0].in"/>
                    <direct name="direct2" input="lut4.out" output="ff.D">
                        <pack_pattern name="ble4" in_port="lut4.out" out_port="ff.D"/>
                    </direct>
                    <direct name="direct3" input="ble4.clk" output="ff.clk"/>
                    <mux name="mux1" input="ff.Q lut4.out" output="ble4.out"/>
                </interconnect>
            </pb_type>
            <interconnect>
                <complete name="completeI0" input="clb.I0" output="ble4[0].in"/>
                <complete name="completeI1" input="clb.I1" output="ble4[1].in"/>
                <complete name="completeI2" input="clb.I2" output="ble4[2].in"/>
                <complete name="completeI3" input="clb.I3" output="ble4[3].in"/>
                <complete name="completeI4" input="clb.I4" output="ble4[4].in"/>
                <complete name="completeI5" input="clb.I5" output="ble4[5].in"/>
                <complete name="completeI6" input="clb.I6" output="ble4[6].in"/>
                <complete name="completeI7" input="clb.I7" output="ble4[7].in"/>
                <complete name="clks" input="clb.clk" output="ble4[7:0].clk"/>
                <direct name="directO" input="ble4[7:0].out" output="clb.O"/>
            </interconnect>
        </pb_type>
  
    </complexblocklist>

</architecture>